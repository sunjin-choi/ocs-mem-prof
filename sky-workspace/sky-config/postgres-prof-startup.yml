

resources:
  # No GPUs or TPUs specified, so a CPU instance will be provisioned.
  cloud: gcp
  instance_type: n1-standard-4  

workdir: ./sky-workdir

file_mounts:
  ## Format: <cluster path>: <local path/cloud object URI>
  ~/.ssh/id_rsa.pub: ~/.ssh/id_rsa.pub

setup: |
  echo "install binaries..."
  sudo apt-get install gcc make flex bison byacc git -y
  sudo apt-get install gcc-9 build-essential cmake postgresql postgresql-client -y  
  echo "clone main repo"
  git clone https://github.com/sunjin-choi/ocs-mem-prof.git
  cd ocs-mem-prof && git submodule update --init --recursive

run: |
  set -e # Exit if any command fails
  cd ocs-mem-prof
  source setup_path.sh
  chmod +x install.sh && ./install.sh
  chmod +x ./util/gen_query.sh && ./util/gen_query.sh
